# Main Screen Revamp PRD (메인 화면 개편)

> **Version**: 1.0
> **Created**: 2026-01-30
> **Status**: Draft
> **Platform**: Expo React Native (WIGEX 위젝스)
> **Depends On**: PRD_travel-expense-tracker.md (v1.1)

## 1. Overview

### 1.1 Problem Statement

현재 앱은 홈 화면이 곧바로 "진행 중인 여행의 지출 관리" 화면이다.
여행이 없거나 예정된 여행만 있을 때는 빈 화면에 "새 여행 만들기" 버튼만 노출되어 활용도가 낮고, 사용자의 전체 여행 현황을 한눈에 파악하기 어렵다.

또한 현재 여행 중일 때의 메인 화면은:

- 오늘 지출이 리스트(레이어) 형식이라 한눈에 비교가 어려움
- 외화 계산을 위해 별도 앱을 사용해야 함
- 영수증 분석 결과로의 빠른 접근이 불가

### 1.2 Goals

- **글로벌 홈 화면 신설**: 지도 + 전체 여행 리스트로 여행 현황 한눈에 파악
- **자동 여행 모드 전환**: 현재 날짜가 여행 기간이면 자동으로 여행 메인으로 이동
- **여행 메인 화면 개선**: 테이블 형식 지출, 예산/총지출 통합 표시
- **내장 계산기**: 여행 국가 통화 기반 계산기로 외부 앱 의존도 제거

### 1.3 Non-Goals (Out of Scope)

- 구글 지도 내 실시간 위치 추적 (GPS 기반)
- 지도 위 경로/동선 그리기
- 여행 일정 상세 관리 (호텔, 항공편 등)
- 다른 사용자와 여행 공유
- 환율 변환기 (계산기와 별도의 환율 변환 전용 기능)

### 1.4 Scope

| 포함                                | 제외                  |
| ----------------------------------- | --------------------- |
| 글로벌 홈 화면 (지도 + 여행 리스트) | 실시간 GPS 위치 추적  |
| 구글 지도 핀 표시 (여행 목적지)     | 경로/동선 표시        |
| 여행 상태별 리스트 (예정/현재/과거) | 여행 일정 상세 관리   |
| 자동 여행 모드 전환 로직            | 다른 사용자와 공유    |
| 테이블 형식 오늘 지출               | 복잡한 예산 분배 도구 |
| 영수증 상세 페이지 네비게이션       | 환율 변환 전용 기능   |
| 내장 계산기 + 통화 선택             | 과학 계산기 기능      |

---

## 2. User Stories

### 2.1 Primary User

해외 여행을 자주 가는 20-40대 한국인 여행자. 여행 전/중/후 경비를 관리하고 싶은 사용자.

### 2.2 User Stories

**US-001: 전체 여행 현황 확인**
As a 여행자, I want to 앱을 열면 내 모든 여행(예정/현재/과거)을 지도와 리스트로 한눈에 확인 so that 내 여행 히스토리와 앞으로의 일정을 쉽게 파악할 수 있다.

**US-002: 지도에서 여행지 확인**
As a 여행자, I want to 구글 지도에 여행 목적지들이 핀으로 표시되어 so that 내가 어디를 다녀왔고 어디를 갈 예정인지 시각적으로 볼 수 있다.

**US-003: 자동 여행 모드 진입**
As a 여행자, I want to 오늘이 여행 기간이면 앱을 열었을 때 자동으로 해당 여행 경비 관리 화면으로 이동 so that 여행 중에는 빠르게 지출을 기록할 수 있다.

**US-004: 테이블 형식 지출 확인**
As a 여행자, I want to 오늘 지출을 테이블(표) 형식으로 확인 so that 카테고리, 금액, 메모를 한눈에 비교할 수 있다.

**US-005: 영수증 상세 이동**
As a 여행자, I want to 영수증으로 입력한 지출에서 버튼을 눌러 영수증 상세 페이지로 이동 so that 촬영한 영수증과 분석 결과를 확인할 수 있다.

**US-006: 내장 계산기 사용**
As a 여행자, I want to 앱 내에서 여행 국가 통화로 계산기를 사용 so that 외부 앱 없이 현지 물건값을 계산할 수 있다.

**US-007: 자동 통화 선택**
As a 여행자, I want to 계산기가 여행 국가 통화를 자동으로 선택 so that 매번 통화를 수동으로 설정하지 않아도 된다.

### 2.3 Acceptance Criteria (Gherkin)

```gherkin
Scenario: 글로벌 홈 - 지도에 여행지 핀 표시
  Given 유럽 배낭여행 (프랑스, 독일, 이탈리아)이 등록되어 있을 때
  When 글로벌 홈 화면을 열면
  Then 구글 지도에 파리, 베를린, 로마 위치에 핀이 표시됨
  And 지도가 모든 핀을 포함하는 영역으로 자동 줌됨

Scenario: 여행 리스트 상태별 분류
  Given 예정 여행 1개, 현재 여행 1개, 과거 여행 2개가 있을 때
  When 글로벌 홈의 리스트를 확인하면
  Then "현재 여행" 섹션에 1개 표시 (강조)
  And "예정된 여행" 섹션에 1개 표시
  And "과거 여행" 섹션에 2개 표시

Scenario: 자동 여행 모드 전환
  Given 오늘 날짜가 1월 30일이고
  And "일본 여행 (1/28 ~ 2/3)" 여행이 등록되어 있을 때
  When 앱을 열면
  Then 글로벌 홈 대신 일본 여행 메인 화면으로 자동 이동

Scenario: 글로벌 홈으로 수동 복귀
  Given 자동으로 여행 메인 화면에 진입한 상태에서
  When 사용자가 뒤로가기/홈 버튼을 누르면
  Then 글로벌 홈 화면으로 이동

Scenario: 예산 + 총지출 표시
  Given 예산 100만원을 설정한 여행에서 45만원을 지출했을 때
  When 여행 메인 화면을 보면
  Then 예산: ₩1,000,000 표시
  And 총 지출: ₩450,000 표시
  And 잔여 예산: ₩550,000 표시

Scenario: 예산 미설정 시
  Given 예산을 설정하지 않은 여행일 때
  When 여행 메인 화면을 보면
  Then 예산 관련 UI는 표시되지 않음
  And 총 지출만 표시

Scenario: 오늘 지출 테이블 표시
  Given 오늘 3건의 지출이 있을 때
  When 여행 메인 화면의 오늘 지출 섹션을 보면
  Then 테이블 형식으로 카테고리 | 메모 | 금액 컬럼 표시
  And 각 행에 지출 항목 표시

Scenario: 영수증 항목 상세 이동
  Given 영수증으로 입력한 지출 항목이 테이블에 있을 때
  When 해당 항목의 영수증 아이콘/버튼을 누르면
  Then 영수증 상세 페이지로 이동
  And 촬영된 영수증 이미지와 분석 결과 표시

Scenario: 계산기 통화 자동 선택 (단일 국가)
  Given 일본 여행 중일 때
  When 계산기 버튼을 누르면
  Then 계산기가 열리며 통화가 자동으로 "JPY (¥)" 선택됨

Scenario: 계산기 통화 선택 (다중 국가)
  Given 유럽 여행 (프랑스 EUR, 영국 GBP, 스위스 CHF) 중일 때
  When 계산기 버튼을 누르면
  Then 계산기가 열리며 여행 국가 통화 목록 (EUR, GBP, CHF) 표시
  And 현재 방문 중인 국가의 통화가 기본 선택됨
  And 다른 통화로 전환 가능
```

---

## 3. Functional Requirements

### 3.1 글로벌 홈 화면

| ID     | Requirement                                                    | Priority    | Dependencies |
| ------ | -------------------------------------------------------------- | ----------- | ------------ |
| FR-101 | 상단에 앱 이름 "WIGEX" 표시                                    | P0 (Must)   | -            |
| FR-102 | 구글 지도 표시 (react-native-maps)                             | P0 (Must)   | -            |
| FR-103 | 여행 목적지를 지도에 핀(마커)으로 표시                         | P0 (Must)   | FR-102       |
| FR-104 | 핀 색상을 여행 상태별로 구분 (예정=파랑, 현재=빨강, 과거=회색) | P1 (Should) | FR-103       |
| FR-105 | 지도가 모든 핀을 포함하는 영역으로 자동 fit                    | P0 (Must)   | FR-103       |
| FR-106 | 지도 아래 여행 리스트를 상태별로 표시 (현재 > 예정 > 과거)     | P0 (Must)   | -            |
| FR-107 | 현재 여행 카드를 강조 표시 (테두리/배지)                       | P1 (Should) | FR-106       |
| FR-108 | 여행 카드 탭 시 해당 여행 메인으로 이동                        | P0 (Must)   | FR-106       |
| FR-109 | "새 여행 만들기" 버튼 (리스트 하단 또는 FAB)                   | P0 (Must)   | -            |

### 3.2 자동 여행 모드 전환

| ID     | Requirement                                               | Priority    | Dependencies |
| ------ | --------------------------------------------------------- | ----------- | ------------ |
| FR-201 | 앱 실행 시 현재 날짜가 여행 기간에 해당하는지 확인        | P0 (Must)   | -            |
| FR-202 | 해당 여행이 있으면 여행 메인 화면으로 자동 이동           | P0 (Must)   | FR-201       |
| FR-203 | 현재 여행이 여러 개인 경우 가장 먼저 시작한 여행으로 이동 | P1 (Should) | FR-202       |
| FR-204 | 글로벌 홈으로 돌아갈 수 있는 네비게이션 제공              | P0 (Must)   | FR-202       |
| FR-205 | 자동 이동을 사용자가 설정에서 끌 수 있음                  | P2 (Could)  | FR-202       |

### 3.3 여행 메인 화면 개편

| ID     | Requirement                                           | Priority    | Dependencies |
| ------ | ----------------------------------------------------- | ----------- | ------------ |
| FR-301 | 예산 설정 시: 예산 금액, 총 지출 금액, 잔여 예산 표시 | P0 (Must)   | -            |
| FR-302 | 예산 미설정 시: 예산 관련 UI 숨김, 총 지출만 표시     | P0 (Must)   | FR-301       |
| FR-303 | 오늘 지출을 테이블(표) 형식으로 표시                  | P0 (Must)   | -            |
| FR-304 | 테이블 컬럼: 카테고리 아이콘, 메모/설명, 금액         | P0 (Must)   | FR-303       |
| FR-305 | 영수증 입력 항목에 영수증 아이콘 버튼 표시            | P0 (Must)   | FR-303       |
| FR-306 | 영수증 버튼 탭 시 해당 영수증 상세 페이지로 이동      | P0 (Must)   | FR-305       |
| FR-307 | 테이블 행 탭 시 지출 수정 화면으로 이동               | P1 (Should) | FR-303       |

### 3.4 계산기 기능

| ID     | Requirement                                          | Priority    | Dependencies |
| ------ | ---------------------------------------------------- | ----------- | ------------ |
| FR-401 | FAB 메뉴 상단(+ 버튼 위)에 계산기 아이콘 버튼 추가   | P0 (Must)   | -            |
| FR-402 | 계산기 화면: 기본 사칙연산 (+, -, ×, ÷)              | P0 (Must)   | FR-401       |
| FR-403 | 계산기 상단에 통화 선택 드롭다운/피커                | P0 (Must)   | FR-402       |
| FR-404 | 단일 국가 여행: 해당 국가 통화 자동 선택             | P0 (Must)   | FR-403       |
| FR-405 | 다중 국가 여행: 여행 내 국가 통화 목록에서 선택 가능 | P0 (Must)   | FR-403       |
| FR-406 | 현재 방문 중인 국가 통화를 기본값으로 설정           | P1 (Should) | FR-405       |
| FR-407 | 계산 결과를 선택된 통화 기호로 포맷팅하여 표시       | P0 (Must)   | FR-402       |
| FR-408 | 계산 결과 하단에 원화(KRW) 환산 금액 표시            | P1 (Should) | FR-407       |
| FR-409 | AC(전체 초기화), DEL(마지막 삭제) 버튼               | P0 (Must)   | FR-402       |
| FR-410 | 소수점 입력 지원                                     | P0 (Must)   | FR-402       |

---

## 4. Non-Functional Requirements

### 4.1 Performance

- 글로벌 홈 지도 로딩: < 2초 (핀 포함)
- 자동 여행 모드 전환: < 500ms (앱 시작 시)
- 계산기 입력 반응: 즉시 (< 50ms)
- 테이블 렌더링: 50개 항목 기준 < 200ms

### 4.2 UX

- 지도 핀 탭 시 여행 이름 툴팁 표시
- 계산기: 큰 숫자 버튼 (최소 48x48dp), 햅틱 피드백
- 테이블: 행 높이 충분히 확보 (터치 타겟 44dp 이상)
- 자동 전환 시 자연스러운 애니메이션 (fade 또는 slide)

### 4.3 Compatibility

- react-native-maps: Google Maps (Android) / Apple Maps (iOS) 지원
- Google Maps API Key 필요 (Android)
- 최소 Expo SDK 54+ 호환

### 4.4 Offline Support

- 지도: 오프라인 시 캐시된 타일 또는 빈 지도 + 핀 좌표 표시
- 계산기: 완전한 오프라인 동작
- 여행 리스트: 로컬 SQLite 데이터로 표시
- KRW 환산: 캐시된 환율 사용

---

## 5. Technical Design

### 5.1 신규 패키지 의존성

```json
{
  "react-native-maps": "^1.18.0",
  "expo-location": "~18.0.0"
}
```

> `react-native-maps`는 Google Maps (Android) + Apple Maps (iOS) 지원.
> `expo-location`은 핀 좌표 역지오코딩에 필요할 경우 사용.

### 5.2 Navigation 구조 변경

```
app/
├── (tabs)/
│   ├── _layout.tsx              # 탭 레이아웃
│   ├── index.tsx                # 🆕 글로벌 홈 (지도 + 여행 리스트)
│   ├── calendar.tsx
│   ├── stats.tsx
│   └── settings.tsx
│
├── trip/
│   ├── new.tsx
│   ├── [id].tsx                 # 여행 상세
│   └── [id]/
│       └── main.tsx             # 🆕 여행 메인 화면 (기존 index.tsx 기능 이동)
│
├── expense/
│   ├── new.tsx
│   ├── [id].tsx
│   └── [id]/
│       └── receipt.tsx          # 🆕 영수증 상세 페이지
│
├── calculator.tsx               # 🆕 계산기 (모달)
└── _layout.tsx
```

**변경 요약**:

- `(tabs)/index.tsx`: 기존 여행 메인 → 글로벌 홈으로 교체
- `trip/[id]/main.tsx`: 기존 홈 화면의 여행 관리 기능을 여기로 이동 + 개편
- `expense/[id]/receipt.tsx`: 영수증 상세 페이지 신규
- `calculator.tsx`: 계산기 모달 신규

### 5.3 데이터 모델 변경

```typescript
// 기존 Destination에 좌표 추가
interface Destination {
  // ... 기존 필드
  latitude?: number; // 🆕 위도 (지도 핀용)
  longitude?: number; // 🆕 경도 (지도 핀용)
}

// 기존 Expense에 영수증 ID 추가
interface Expense {
  // ... 기존 필드
  receiptId?: string; // 🆕 영수증 분석 결과 ID
  inputMethod?: ExpenseInputMethod; // 🆕 입력 방식 (receipt | manual)
}

// 🆕 여행 상태 enum
type TripStatus = 'upcoming' | 'active' | 'past';

// 🆕 여행 + 상태 헬퍼
function getTripStatus(trip: Trip): TripStatus {
  const today = new Date().toISOString().split('T')[0];
  if (today < trip.startDate) return 'upcoming';
  if (today > trip.endDate) return 'past';
  return 'active';
}
```

### 5.4 SQLite 스키마 변경

```sql
-- Destination 테이블에 좌표 컬럼 추가
ALTER TABLE destinations ADD COLUMN latitude REAL;
ALTER TABLE destinations ADD COLUMN longitude REAL;

-- Expense 테이블에 영수증 관련 컬럼 추가
ALTER TABLE expenses ADD COLUMN receipt_id TEXT;
ALTER TABLE expenses ADD COLUMN input_method TEXT DEFAULT 'manual';
```

### 5.5 핵심 컴포넌트 설계

#### 5.5.1 글로벌 홈 화면

```
┌──────────────────────────────────────┐
│  WIGEX                          [⚙️] │
├──────────────────────────────────────┤
│                                      │
│  ┌──────────────────────────────────┐│
│  │         Google Maps              ││
│  │                                  ││
│  │    📍Paris   📍Berlin            ││
│  │         📍Rome                   ││
│  │                                  ││
│  │                                  ││
│  └──────────────────────────────────┘│
│                                      │
│  🟢 현재 여행                         │
│  ┌──────────────────────────────────┐│
│  │ 🇯🇵 일본 여행                     ││
│  │ 1/28 ~ 2/3 · Day 3 진행 중       ││
│  │                           → 이동 ││
│  └──────────────────────────────────┘│
│                                      │
│  🔵 예정된 여행                       │
│  ┌──────────────────────────────────┐│
│  │ 🇫🇷🇩🇪🇮🇹 유럽 배낭여행             ││
│  │ 3/15 ~ 4/5 · D-44                ││
│  └──────────────────────────────────┘│
│                                      │
│  ⚪ 과거 여행                         │
│  ┌──────────────────────────────────┐│
│  │ 🇹🇭 태국 여행                     ││
│  │ 12/20 ~ 12/27 · 완료             ││
│  └──────────────────────────────────┘│
│                                      │
│  ┌──────────────────────────────────┐│
│  │       + 새 여행 만들기            ││
│  └──────────────────────────────────┘│
│                                      │
└──────────────────────────────────────┘
```

#### 5.5.2 여행 메인 화면 (개편)

```
┌──────────────────────────────────────┐
│  [←홈]  일본 여행              [⚙️]  │
├──────────────────────────────────────┤
│                                      │
│  Day 3 · 🇯🇵 일본                    │
│                                      │
│  ┌──────────────────────────────────┐│
│  │  예산        ₩1,000,000          ││
│  │  총 지출     ₩450,000            ││
│  │  잔여        ₩550,000            ││
│  │  ██████████████░░░░░░░  45%      ││
│  └──────────────────────────────────┘│
│  * 예산 미설정 시 총 지출만 표시      │
│                                      │
│  📋 오늘 지출                         │
│  ┌──────────────────────────────────┐│
│  │ 카테고리 │ 내용       │   금액    ││
│  ├──────────────────────────────────┤│
│  │ 🍽️ 식비  │ 라멘       │  ¥1,500  ││
│  │ 🚃 교통  │ 지하철     │    ¥280  ││
│  │ 🛍️ 쇼핑  │ 편의점  📷 │    ¥650  ││
│  │          │            │          ││
│  │          │     합계    │  ¥2,430  ││
│  │          │  ≈ ₩22,478 │          ││
│  └──────────────────────────────────┘│
│  📷 = 영수증 있음 (탭하면 상세 이동)  │
│                                      │
│                          [🔢]        │ ← 계산기 버튼
│                          [ + ]       │ ← 지출 추가 FAB
│                                      │
└──────────────────────────────────────┘
```

#### 5.5.3 계산기 모달

```
┌──────────────────────────────────────┐
│  [X]         계산기                  │
├──────────────────────────────────────┤
│                                      │
│  통화: [🇯🇵 JPY (¥)        ▼]       │
│                                      │
│  ┌──────────────────────────────────┐│
│  │                        ¥ 1,500  ││
│  │                     ≈ ₩13,875   ││
│  └──────────────────────────────────┘│
│                                      │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐       │
│  │ AC │ │ DEL│ │  % │ │  ÷ │       │
│  └────┘ └────┘ └────┘ └────┘       │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐       │
│  │  7 │ │  8 │ │  9 │ │  × │       │
│  └────┘ └────┘ └────┘ └────┘       │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐       │
│  │  4 │ │  5 │ │  6 │ │  - │       │
│  └────┘ └────┘ └────┘ └────┘       │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐       │
│  │  1 │ │  2 │ │  3 │ │  + │       │
│  └────┘ └────┘ └────┘ └────┘       │
│  ┌─────────┐ ┌────┐ ┌────┐         │
│  │    0    │ │  . │ │  = │         │
│  └─────────┘ └────┘ └────┘         │
│                                      │
└──────────────────────────────────────┘
```

### 5.6 API Specification

> 이번 기능은 주로 클라이언트 사이드 변경이며, 백엔드 API 변경은 최소입니다.

#### `GET /api/v1/trips`

**Description**: 사용자의 전체 여행 목록 조회 (기존 API 그대로 사용)

**Authentication**: Required (Bearer Token)

**Response 200 OK**:

```json
{
  "success": true,
  "data": [
    {
      "id": "trip_001",
      "name": "일본 여행",
      "startDate": "2026-01-28",
      "endDate": "2026-02-03",
      "budget": 1000000,
      "createdAt": "2026-01-15T09:00:00Z"
    }
  ]
}
```

#### `GET /api/v1/trips/:id/destinations`

**Description**: 여행의 방문지 목록 조회 (좌표 포함)

**Response 200 OK** (변경: latitude, longitude 추가):

```json
{
  "success": true,
  "data": [
    {
      "id": "dest_001",
      "tripId": "trip_001",
      "country": "일본",
      "countryName": "Japan",
      "city": "도쿄",
      "currency": "JPY",
      "startDate": "2026-01-28",
      "endDate": "2026-02-03",
      "orderIndex": 0,
      "latitude": 35.6762,
      "longitude": 139.6503,
      "createdAt": "2026-01-15T09:00:00Z"
    }
  ]
}
```

#### `PUT /api/v1/destinations/:id`

**Description**: 방문지 수정 (좌표 업데이트 포함)

**Request Body** (변경: latitude, longitude 추가):

```json
{
  "country": "string (optional)",
  "city": "string (optional)",
  "latitude": "number (optional) - 위도",
  "longitude": "number (optional) - 경도"
}
```

**Response 200 OK**:

```json
{
  "success": true,
  "data": {
    "id": "dest_001",
    "latitude": 35.6762,
    "longitude": 139.6503
  }
}
```

**Error Responses**:
| Status | Code | Message | Description |
|--------|------|---------|-------------|
| 400 | INVALID_INPUT | Invalid coordinates | 잘못된 좌표 값 |
| 404 | NOT_FOUND | Destination not found | 방문지 없음 |

---

## 6. Implementation Phases

### Phase 1: 글로벌 홈 화면 + 자동 전환

- [ ] `react-native-maps` 패키지 설치 및 설정
- [ ] Destination 모델에 latitude/longitude 추가 (SQLite migration)
- [ ] 여행 생성/편집 시 도시명으로 좌표 자동 매핑 (geocoding)
- [ ] 글로벌 홈 화면 구현 (앱 이름 + 지도 + 여행 리스트)
- [ ] 지도에 여행 목적지 핀 표시 (상태별 색상)
- [ ] 여행 리스트 상태별 분류 (현재/예정/과거)
- [ ] 자동 여행 모드 전환 로직 구현
- [ ] 글로벌 홈 ↔ 여행 메인 네비게이션 연결

**Deliverable**: 새로운 글로벌 홈 화면, 자동 여행 전환

### Phase 2: 여행 메인 화면 개편

- [ ] 기존 홈 화면 로직을 `trip/[id]/main.tsx`로 이동
- [ ] 예산/총지출/잔여 예산 표시 영역 구현
- [ ] 오늘 지출 테이블 형식 컴포넌트 구현
- [ ] 영수증 입력 항목에 영수증 아이콘 버튼 추가
- [ ] 영수증 상세 페이지 생성 및 네비게이션 연결

**Deliverable**: 개편된 여행 메인 화면

### Phase 3: 계산기 기능

- [ ] 계산기 모달 UI 구현 (숫자 패드 + 연산 버튼)
- [ ] 사칙연산 로직 구현
- [ ] 통화 선택 피커 구현 (여행 국가 기반)
- [ ] 단일 국가: 자동 통화 선택 로직
- [ ] 다중 국가: 현재 방문 국가 기본 선택 + 수동 전환
- [ ] 결과의 KRW 환산 표시
- [ ] FAB 영역에 계산기 버튼 배치

**Deliverable**: 내장 계산기 기능

### Phase 4: 마무리

- [ ] 다크모드 대응 (신규 화면)
- [ ] 오프라인 동작 검증
- [ ] 애니메이션/전환 효과 추가
- [ ] 접근성(VoiceOver) 확인
- [ ] 기존 테스트 코드 업데이트

**Deliverable**: 배포 준비 완료

---

## 7. Success Metrics

| Metric              | Target           | Measurement  |
| ------------------- | ---------------- | ------------ |
| 글로벌 홈 지도 로딩 | < 2초            | 성능 측정    |
| 자동 전환 속도      | < 500ms          | 앱 시작 시간 |
| 계산기 입력 반응    | < 50ms           | UI 반응성    |
| 테이블 렌더링       | < 200ms (50항목) | 성능 측정    |
| 오프라인 동작률     | 100% (지도 제외) | 테스트       |

---

## 8. UI Wire Frames Summary

### 8.1 화면 흐름도

```
┌─────────────┐     자동 전환      ┌──────────────┐
│  글로벌 홈   │ ──────────────── → │  여행 메인     │
│  (지도+리스트)│ ← ─ ─ ─ ─ ─ ─ ── │  (예산+지출표) │
└─────────────┘     뒤로가기       └──────────────┘
      │                                   │
      │ 카드 탭                           │
      ▼                                   ▼
┌─────────────┐                    ┌──────────────┐
│  여행 상세   │                    │  계산기 모달  │
│             │                    │  (통화 선택)  │
└─────────────┘                    └──────────────┘
                                          │
                                   ┌──────────────┐
                                   │  영수증 상세  │
                                   └──────────────┘
```

### 8.2 컴포넌트 계층

```
글로벌 홈 (GlobalHomeScreen)
├── AppHeader (앱 이름 "WIGEX")
├── TripMapView (react-native-maps)
│   └── TripMarker[] (핀)
├── TripListSection
│   ├── TripStatusHeader ("현재 여행" / "예정된 여행" / "과거 여행")
│   └── TripCard[] (여행 카드)
└── CreateTripButton

여행 메인 (TripMainScreen)
├── TripHeader (여행 이름 + Day N + 홈 버튼)
├── BudgetSummaryCard (예산/지출/잔여)
├── TodayExpenseTable
│   ├── TableHeader (카테고리 | 내용 | 금액)
│   └── TableRow[] (지출 항목)
│       └── ReceiptBadge (📷 영수증 있으면 표시)
├── CalculatorFAB (계산기 버튼)
└── ExpenseFABMenu (+ 버튼)

계산기 (CalculatorModal)
├── CurrencyPicker (통화 선택)
├── DisplayArea (입력값 + KRW 환산)
└── Keypad (숫자 + 연산자)
```

---

## 9. Open Questions

1. **지도 타입**: Google Maps만 사용? 아니면 iOS는 Apple Maps 기본?
2. **좌표 매핑**: 도시명 → 좌표 변환을 클라이언트에서? 여행 생성 시 서버에서?
3. **핀 디자인**: 기본 마커 사용? 커스텀 마커 (국기 아이콘)?
4. **자동 전환 UX**: 앱 실행 시만? 아니면 매번 홈 탭 진입 시마다?
5. **계산기 히스토리**: 계산 기록 저장 필요?

---

## 10. Appendix

### A. 기존 화면 → 신규 화면 매핑

| 기존                           | 신규                           | 변경 내용                |
| ------------------------------ | ------------------------------ | ------------------------ |
| `(tabs)/index.tsx` (여행 메인) | `(tabs)/index.tsx` (글로벌 홈) | 완전 교체                |
| -                              | `trip/[id]/main.tsx`           | 기존 홈 기능 이동 + 개편 |
| -                              | `calculator.tsx`               | 신규                     |
| -                              | `expense/[id]/receipt.tsx`     | 신규                     |

### B. 디자인 토큰 참조 (DESIGN-GUIDE.md 기반)

| Token                | Value     | 용도                          |
| -------------------- | --------- | ----------------------------- |
| Primary (Coral)      | `#FF6B6B` | 현재 여행 강조, 계산기 = 버튼 |
| Secondary (Sky Blue) | `#4DABF7` | 예정 여행 핀, 정보 카드       |
| Neutral Gray         | `#868E96` | 과거 여행 핀/텍스트           |
| Success Green        | `#51CF66` | 잔여 예산 양호                |
| Warning Amber        | `#FCC419` | 예산 80% 초과                 |
| Error Red            | `#FF6B6B` | 예산 100% 초과                |

### C. 지도 핀 색상 규칙

| 여행 상태       | 핀 색상   | Hex       |
| --------------- | --------- | --------- |
| 현재 (active)   | Coral Red | `#FF6B6B` |
| 예정 (upcoming) | Sky Blue  | `#4DABF7` |
| 과거 (past)     | Gray      | `#ADB5BD` |
